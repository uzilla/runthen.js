!function(t){function n(t){var e=this;e._state=0,e._executor=t,e._resolveList=[],e._onCatch=null}n.prototype.then=function(t){return this._resolveList.push(t),this},n.prototype.catch=function(t){return this._onCatch=t,this},n.prototype.destroy=function(){this._resolveList.length=0,this._onCatch=null},n.prototype.done=function(){var e=this,n=null,o=null,s=null;0===e._state&&(o=function(t){for(n=t;0<e._resolveList.length;){o=e._resolveList.shift();try{n=o(n)}catch(t){"function"==typeof(s=e._onCatch)&&s(t),e._state=2;break}}e.destroy(),0===e._state&&(e._state=1)},e._executor(o))},n.resolve=function(e){return new n(function(t){t(e)})},t.Runthen=n,"object"==typeof exports&&(exports.Runthen=n)}(this);